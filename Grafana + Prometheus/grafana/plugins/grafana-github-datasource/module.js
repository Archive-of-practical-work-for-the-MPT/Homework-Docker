/* [create-plugin] version: 5.26.9 */
/* [create-plugin] plugin: grafana-github-datasource@2.3.0 */
define(["@emotion/css","@grafana/data","@grafana/runtime","@grafana/ui","lodash","module","react","rxjs"],((e,t,r,n,o,a,l,i)=>(()=>{"use strict";var c={89:t=>{t.exports=e},781:e=>{e.exports=t},531:e=>{e.exports=r},7:e=>{e.exports=n},241:e=>{e.exports=o},308:e=>{e.exports=a},959:e=>{e.exports=l},269:e=>{e.exports=i}},u={};function s(e){var t=u[e];if(void 0!==t)return t.exports;var r=u[e]={exports:{}};return c[e](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="public/plugins/grafana-github-datasource/";var p={};s.r(p),s.d(p,{plugin:()=>Mt});var b=s(308),y=s.n(b);s.p=y()&&y().uri?y().uri.slice(0,y().uri.lastIndexOf("/")+1):"public/plugins/grafana-github-datasource/";var f,g=s(781),m=s(531),O=s(269),d=s(959),h=s.n(d),v=s(7),j=s(241);!function(e){e.Code_Scanning="Code_Scanning",e.Commits="Commits",e.Issues="Issues",e.Contributors="Contributors",e.Tags="Tags",e.Releases="Releases",e.Pull_Requests="Pull_Requests",e.Pull_Request_Reviews="Pull_Request_Reviews",e.Labels="Labels",e.Repositories="Repositories",e.Organizations="Organizations",e.GraphQL="GraphQL",e.Milestones="Milestones",e.Packages="Packages",e.Vulnerabilities="Vulnerabilities",e.Projects="Projects",e.ProjectItems="ProjectItems",e.Stargazers="Stargazers",e.Workflows="Workflows",e.Workflow_Usage="Workflow_Usage",e.Workflow_Runs="Workflow_Runs"}(f||(f={}));const w="Issues";var P,E,S,T,C;!function(e){e.NPM="NPM",e.RUBYGEMS="RUBYGEMS",e.MAVEN="MAVEN",e.DOCKER="DOCKER",e.DEBIAN="DEBIAN",e.NUGET="NUGET",e.PYPI="PYPI"}(P||(P={})),function(e){e[e.ClosedAt=0]="ClosedAt",e[e.CreatedAt=1]="CreatedAt",e[e.MergedAt=2]="MergedAt",e[e.UpdatedAt=3]="UpdatedAt",e[e.None=4]="None"}(E||(E={})),function(e){e[e.CreatedAt=0]="CreatedAt",e[e.ClosedAt=1]="ClosedAt",e[e.UpdatedAt=2]="UpdatedAt"}(S||(S={})),function(e){e[e.CreatedAt=0]="CreatedAt",e[e.UpdatedAt=1]="UpdatedAt"}(T||(T={})),function(e){e[e.ORG=0]="ORG",e[e.USER=1]="USER"}(C||(C={}));const k=e=>{if((e.queryType===f.Repositories||e.queryType===f.Code_Scanning)&&(0,j.isEmpty)(e.owner))return!1;if((e.queryType===f.Commits||e.queryType===f.Contributors||e.queryType===f.Tags||e.queryType===f.Releases||e.queryType===f.Labels||e.queryType===f.Milestones||e.queryType===f.Vulnerabilities||e.queryType===f.Stargazers)&&((0,j.isEmpty)(e.owner)||(0,j.isEmpty)(e.repository)))return!1;if(e.queryType===f.Projects){var t,r,n;if((0,j.isEmpty)(null===(t=e.options)||void 0===t?void 0:t.user)&&(null===(r=e.options)||void 0===r?void 0:r.kind)===C.USER)return!1;if((0,j.isEmpty)(null===(n=e.options)||void 0===n?void 0:n.organization))return!1}return!!e.queryType},D={AccessToken:"data-testid Access Token"},q={QueryType:{container:{ariaLabel:"Query Type container"}},Owner:{input:"Query editor owner"},Repository:{input:"Query editor repository"},Query:{input:"Query editor query"},Ref:{input:"Query editor ref"},CodeScanState:{input:"Query editor code scan state"},Number:{input:"Query editor number"},Issues:{timeFieldInput:"Query editor issues time field"}};var F=s(89);const I=e=>{const t=R();return h().createElement(v.InlineFieldRow,{className:t.rowSpacing},e.children)},R=()=>({rowSpacing:(0,F.css)({marginBottom:"4px"})});function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){A(e,t,r[t])}))}return e}function N(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const B=e=>{const[t,r]=(0,d.useState)(e.repository||""),[n,o]=(0,d.useState)(e.owner||"");return(0,d.useEffect)((()=>{r(e.repository||"")}),[e.repository]),(0,d.useEffect)((()=>{o(e.owner||"")}),[e.owner]),h().createElement(I,null,h().createElement(v.InlineLabel,{tooltip:"The owner (organization or user) of the GitHub repository (example: 'grafana')",width:2*nt},"Owner"),h().createElement(v.Input,{"aria-label":q.Owner.input,width:ot,value:n,onChange:e=>o(e.currentTarget.value),onBlur:t=>e.onChange(N(x({},e),{owner:t.currentTarget.value}))}),h().createElement(v.InlineLabel,{tooltip:"The name of the GitHub repository",width:2*nt},"Repository"),h().createElement(v.Input,{"aria-label":q.Repository.input,width:ot,value:t,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(N(x({},e),{repository:t.currentTarget.value}))}))},W=()=>h().createElement(h().Fragment,null);function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const U=e=>{const[t,r]=(0,d.useState)(e.gitRef||"");return h().createElement(h().Fragment,null,h().createElement(v.InlineField,{labelWidth:2*nt,label:"Ref (Branch / Tag)"},h().createElement(v.Input,{"aria-label":q.Ref.input,width:ot,value:t,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(G(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){_(e,t,r[t])}))}return e}({},e),{gitRef:t.currentTarget.value}))})))};function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){L(e,t,r[t])}))}return e}function M(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const z=Object.keys(S).filter(((e,t)=>void 0!==S[t])).map(((e,t)=>({label:`${S[t]}`,value:t}))),V=e=>{const[t,r]=(0,d.useState)(e.query||"");return h().createElement(h().Fragment,null,h().createElement(v.InlineField,{labelWidth:2*nt,label:"Query",tooltip:()=>h().createElement(h().Fragment,null,"For more information, visit ",h().createElement("a",{href:"https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests",target:"_blank",rel:"noreferrer"},"https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests")),interactive:!0},h().createElement(v.Input,{value:t,width:2*ot+nt,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(M(Q({},e),{query:t.currentTarget.value}))})),h().createElement(v.InlineField,{labelWidth:2*nt,label:"Time Field",tooltip:"The time field to filter on the time range"},h().createElement(v.Select,{"data-testid":q.Issues.timeFieldInput,width:ot,options:z,value:e.timeField||0,onChange:t=>e.onChange(M(Q({},e),{timeField:t.value}))})))};function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const J=e=>{const[t,r]=(0,d.useState)(e.query||"");return h().createElement(h().Fragment,null,h().createElement(v.InlineField,{labelWidth:2*nt,label:"Query",tooltip:"Query milestones by title"},h().createElement(v.Input,{value:t,width:2*ot+nt,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange($(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){H(e,t,r[t])}))}return e}({},e),{query:t.currentTarget.value}))})))};function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){K(e,t,r[t])}))}return e}function X(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Z=Object.keys(E).filter(((e,t)=>void 0!==E[t])).map(((e,t)=>({label:`${E[t]}`,value:t}))),ee=Z[0].value,te=e=>{const[t,r]=(0,d.useState)(e.query||"");return h().createElement(h().Fragment,null,h().createElement(v.InlineField,{labelWidth:2*nt,label:"Query",tooltip:()=>h().createElement(h().Fragment,null,"For more information, visit ",h().createElement("a",{href:"https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests",target:"_blank",rel:"noreferrer"},"https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests")),interactive:!0},h().createElement(v.Input,{value:t,width:ot,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(X(Y({},e),{query:t.currentTarget.value}))})),h().createElement(v.InlineField,{labelWidth:2*nt,label:"Time Field",tooltip:"The time field to filter on the time range. WARNING: If selecting 'None', be mindful of the amount of data being queried. On larger repositories, querying all pull requests could easily cause rate limiting"},h().createElement(v.Select,{width:ot,options:Z,value:e.timeField||ee,onChange:t=>e.onChange(X(Y({},e),{timeField:t.value}))})))};function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){re(e,t,r[t])}))}return e}function oe(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const ae=Object.keys(E).filter(((e,t)=>void 0!==E[t])).map(((e,t)=>({label:`${E[t]}`,value:t}))),le=ae[0].value,ie=e=>{const[t,r]=(0,d.useState)(e.query||"");return h().createElement(h().Fragment,null,h().createElement(v.InlineField,{labelWidth:2*nt,label:"Query",tooltip:()=>h().createElement(h().Fragment,null,"For more information, visit ",h().createElement("a",{href:"https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests",target:"_blank",rel:"noreferrer"},"https://docs.github.com/en/github/searching-for-information-on-github/searching-issues-and-pull-requests")),interactive:!0},h().createElement(v.Input,{value:t,width:ot,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(oe(ne({},e),{query:t.currentTarget.value}))})),h().createElement(v.InlineField,{labelWidth:2*nt,label:"Time Field",tooltip:"The time field to filter on the time range. WARNING: If selecting 'None', be mindful of the amount of data being queried. On larger repositories, querying all pull requests could easily cause rate limiting"},h().createElement(v.Select,{width:ot,options:ae,value:e.timeField||le,onChange:t=>e.onChange(oe(ne({},e),{timeField:t.value}))})))},ce=()=>h().createElement(h().Fragment,null);function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function se(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const pe=e=>{const[t,r]=(0,d.useState)(e.query||"");return h().createElement(h().Fragment,null,h().createElement(v.InlineField,{labelWidth:2*nt,label:"Query (optional)"},h().createElement(v.Input,{width:ot,value:t,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(se(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ue(e,t,r[t])}))}return e}({},e),{query:t.currentTarget.value}))})))};function be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const fe=e=>{const[t,r]=(0,d.useState)(e.query||"");return h().createElement(h().Fragment,null,h().createElement(v.InlineField,{labelWidth:2*nt,label:"Query (optional)"},h().createElement(v.Input,{width:ot,value:t,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(ye(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){be(e,t,r[t])}))}return e}({},e),{query:t.currentTarget.value}))})))};function ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ge(e,t,r[t])}))}return e}function Oe(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const de=P.DOCKER,he=e=>{const[t,r]=(0,d.useState)(e.names||"");(0,d.useEffect)((()=>{e.packageType||e.onChange(Oe(me({},e),{packageType:de}))}),[e]);const n=(0,d.useMemo)((()=>{const t=[P.NPM,P.RUBYGEMS,P.NUGET],r=Object.values(P).filter((e=>!t.includes(e))).map((e=>({label:e.replace("/_/gi"," "),value:e})));if(e.packageType){r.find((t=>t.value===e.packageType))||r.push({label:e.packageType.replace("/_/gi"," "),value:e.packageType})}return r}),[]);return h().createElement(h().Fragment,null,h().createElement(v.InlineField,{labelWidth:2*nt,label:"Package type"},h().createElement(v.Select,{options:n,value:e.packageType||de,width:ot,onChange:t=>e.onChange(Oe(me({},e),{packageType:t.value}))})),h().createElement(v.InlineField,{labelWidth:2*nt,label:"Names",tooltip:"Search for packages using a comma delimited list of names"},h().createElement(v.Input,{value:t,width:2*ot+nt,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(Oe(me({},e.query),{names:t.currentTarget.value}))})))},ve=()=>h().createElement(h().Fragment,null);function je(e,t,r,n,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function we(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function l(e){je(a,n,o,l,i,"next",e)}function i(e){je(a,n,o,l,i,"throw",e)}l(void 0)}))}}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Pe(e,t,r[t])}))}return e}function Se(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Te=e=>{const{value:t,onChange:r}=e,[n,o]=(0,d.useState)(t||[]),[a,l]=(0,d.useState)(),i=e=>t=>{p(n.map(((r,n)=>n===e?Se(Ee({},r),{value:t.value}):r)))},c=e=>t=>{p(n.map(((r,n)=>n===e?Se(Ee({},r),{op:t.value}):r)))},u=e=>t=>{p(n.map(((r,n)=>n===e?Se(Ee({},r),{conjunction:t.value}):r)))},s=e=>()=>{p(n.filter(((t,r)=>r!==e)))};function p(e){o(e),r(e)}const b=t=>we((function*(){l(t);const r=n[t].key,o=yield e.loadOptions(r);return l(void 0),o})),y=n||[],f=["and","or"].map((e=>({label:e,value:e}))),g={loading:F.css`
      position: absolute;
      top: 0;
      padding: 8px 10px;
      font-weight: 500;
      font-size: 12px;
    `,wrapper:F.css`
      position: relative;
    `};return h().createElement(v.InlineFieldRow,null,h().createElement(h().Fragment,null,y.map(((t,r)=>{return h().createElement(h().Fragment,null,h().createElement(v.SegmentAsync,{loadOptions:e.loadOptions,placeholder:"Key...",allowCustomValue:!0,value:t.key,onChange:(l=r,e=>{const t=n.map(((t,r)=>r===l?Se(Ee({},t),{key:e.value,value:""}):t));o(t)})}),h().createElement(v.Segment,{placeholder:"Operator...",value:t.op,onChange:c(r),options:e.ops}),h().createElement("span",{className:g.wrapper},h().createElement(v.SegmentAsync,{loadOptions:b(r),placeholder:"Value...",allowCustomValue:!0,value:t.value,onChange:i(r)}),a===r&&h().createElement("div",{className:g.loading},"Loading...")),h().createElement(v.Button,{variant:"secondary","aria-label":"Remove filter",onClick:s(r),icon:"trash-alt"}),y.length>1&&r!==y.length-1&&h().createElement(v.Segment,{onChange:u(r),options:f,value:t.conjunction||"and"}));var l})),h().createElement(v.Button,{variant:"secondary","aria-label":"Add filter",onClick:()=>{var t;o([...n,{key:"",value:"",op:(null===(t=e.ops[0])||void 0===t?void 0:t.value)||"="}])},icon:"plus"})))};function Ce(e,t,r,n,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ke(e,t,r[t])}))}return e}function qe(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}Te.displayName="Filters";const Fe=[{label:"Organization",value:C.ORG},{label:"User",value:C.USER}],Ie=[{label:"Type",value:"type"},{label:"Created At",value:"created_at"},{label:"Title",value:"Title"},{label:"Assignees",value:"Assignees"},{label:"Status",value:"Status"},{label:"Labels",value:"Labels"},{label:"Reviewers",value:"Reviewers"},{label:"Milestone",value:"Milestone"},{label:"Iteration",value:"Iteration"}],Re=[{label:"Equal",value:"="},{label:"Not Equal",value:"!="},{label:"Greater Than",value:">"},{label:"Less Than",value:"<"},{label:"Less Than or Equal",value:"<="},{label:"Greater Than or Equal",value:">="},{label:"Contains",value:"~"}],Ae=(xe=function*(e){return e?[]:Ie},Ne=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=xe.apply(e,t);function a(e){Ce(o,r,n,a,l,"next",e)}function l(e){Ce(o,r,n,a,l,"throw",e)}a(void 0)}))},function(e){return Ne.apply(this,arguments)});var xe,Ne;function Be(e){if(e.includes("$"))return e;const t=parseInt(e,10);return isNaN(t)?void 0:t}const We=e=>{const[t,r]=(0,d.useState)(e.organization||""),[n,o]=(0,d.useState)(e.user||""),[a,l]=(0,d.useState)(e.number),[i,c]=(0,d.useState)(e.kind||C.ORG),[u,s]=(0,d.useState)(e.filters||[]),p=i===C.ORG?"Organization":"User",b=i===C.ORG?"The organization for the GitHub project (example: 'grafana')":"The user who owns the GitHub project";return h().createElement(h().Fragment,null,h().createElement(I,null,h().createElement(v.InlineLabel,{tooltip:"The owner of the GitHub project.",width:2*nt},"Project Owner"),h().createElement(v.InlineField,null,h().createElement(v.RadioButtonGroup,{options:Fe,value:i,onChange:t=>{c(t),e.onChange(qe(De({},e),{kind:t}))},size:"md"}))),h().createElement(I,null,h().createElement(v.InlineLabel,{tooltip:b,width:2*nt},p),i===C.ORG&&h().createElement(v.Input,{"aria-label":q.Owner.input,width:ot,value:t,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(qe(De({},e),{organization:t.currentTarget.value,kind:i}))}),i===C.USER&&h().createElement(v.Input,{"aria-label":q.Owner.input,width:ot,value:n,onChange:e=>o(e.currentTarget.value),onBlur:t=>e.onChange(qe(De({},e),{user:t.currentTarget.value,kind:i}))})),h().createElement(I,null,h().createElement(v.InlineLabel,{tooltip:"The project number for the GitHub project (example: 123).",width:2*nt},"Project Number"),h().createElement(v.Input,{"aria-label":q.Number.input,width:ot,value:a,onChange:e=>l(Be(e.currentTarget.value)),onBlur:t=>e.onChange(qe(De({},e),{number:Be(t.currentTarget.value)}))})),a&&h().createElement(I,null,h().createElement(v.InlineLabel,{width:2*nt},"Filters"),h().createElement(Te,{onChange:t=>{s(t),e.onChange(qe(De({},e),{filters:t}))},loadOptions:Ae,value:u,ops:Re})))};function _e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ge(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Ue=Object.keys(T).filter(((e,t)=>void 0!==T[t])).map(((e,t)=>({label:`${T[t]}`,value:t}))),Le=e=>h().createElement(h().Fragment,null,h().createElement(v.InlineField,{labelWidth:2*nt,label:"Time Field",tooltip:"The time field to filter on the time range"},h().createElement(v.Select,{width:ot,options:Ue,value:e.timeField||0,onChange:t=>{e.onChange(Ge(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){_e(e,t,r[t])}))}return e}({},e),{timeField:t.value}))}})));function Qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Me(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const ze=e=>{const[t,r]=(0,d.useState)(e.workflow);return h().createElement(h().Fragment,null,h().createElement(v.InlineField,{labelWidth:2*nt,label:"Workflow",tooltip:"The workflow id number or file name (e.g my-workflow.yml)"},h().createElement(v.Input,{value:t,width:2*ot+nt,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(Me(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Qe(e,t,r[t])}))}return e}({},e),{workflow:t.currentTarget.value}))})))};function Ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ve(e,t,r[t])}))}return e}function $e(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Je=e=>{const[t,r]=(0,d.useState)(e.workflow),[n,o]=(0,d.useState)(e.branch);return h().createElement(h().Fragment,null,h().createElement(v.InlineField,{labelWidth:2*nt,label:"Workflow",tooltip:"The workflow id number or file name (e.g my-workflow.yml)"},h().createElement(v.Input,{value:t,width:2*ot+nt,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange($e(He({},e),{workflow:t.currentTarget.value}))})),h().createElement(v.InlineField,{labelWidth:2*nt,label:"Branch",tooltip:"The branch to filter on (can be left empty)"},h().createElement(v.Input,{value:n,width:2*ot+nt,onChange:e=>o(e.currentTarget.value),onBlur:t=>e.onChange($e(He({},e),{branch:t.currentTarget.value}))})))};function Ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ke(e,t,r[t])}))}return e}function Xe(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Ze=e=>{const[t,r]=(0,d.useState)(e.state||"open"),[n,o]=(0,d.useState)(e.gitRef||"");return h().createElement(h().Fragment,null,h().createElement(v.InlineField,{labelWidth:2*nt,label:"State",tooltip:"Can be one of: open, closed, dismissed, fixed. Default: open"},h().createElement(v.Input,{"aria-label":q.CodeScanState.input,width:ot,value:t,onChange:e=>r(e.currentTarget.value),onBlur:t=>e.onChange(Xe(Ye({},e),{gitRef:n,state:t.currentTarget.value}))})),h().createElement(v.InlineField,{labelWidth:2*nt,label:"Ref (Branch / Tag)"},h().createElement(v.Input,{"aria-label":q.Ref.input,width:ot,value:n,onChange:e=>o(e.currentTarget.value),onBlur:r=>e.onChange(Xe(Ye({},e),{state:t,gitRef:r.currentTarget.value}))})))};function et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){et(e,t,r[t])}))}return e}function rt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const nt=10,ot=36,at={[f.Repositories]:{component:(e,t)=>h().createElement(h().Fragment,null)},[f.Labels]:{component:(e,t)=>h().createElement(fe,rt(tt({},e.query.options||{}),{onChange:t}))},[f.Contributors]:{component:(e,t)=>h().createElement(pe,rt(tt({},e.query.options||{}),{onChange:t}))},[f.Tags]:{component:(e,t)=>h().createElement(ce,e.query.options||{})},[f.Code_Scanning]:{component:(e,t)=>h().createElement(Ze,rt(tt({},e.query.options||{}),{onChange:t}))},[f.Releases]:{component:(e,t)=>h().createElement(W,e.query.options||{})},[f.Commits]:{component:(e,t)=>h().createElement(U,rt(tt({},e.query.options||{}),{onChange:t}))},[f.Milestones]:{component:(e,t)=>h().createElement(J,rt(tt({},e.query.options||{}),{onChange:t}))},[f.Issues]:{component:(e,t)=>h().createElement(V,rt(tt({},e.query.options||{}),{onChange:t}))},[f.Packages]:{component:(e,t)=>h().createElement(he,rt(tt({},e.query.options||{}),{onChange:t}))},[f.Pull_Requests]:{component:(e,t)=>h().createElement(te,rt(tt({},e.query.options||{}),{onChange:t}))},[f.Pull_Request_Reviews]:{component:(e,t)=>h().createElement(ie,rt(tt({},e.query.options||{}),{onChange:t}))},[f.Vulnerabilities]:{component:(e,t)=>h().createElement(ve,e.query.options||{})},[f.Projects]:{component:(e,t)=>h().createElement(We,rt(tt({},e.query.options||{}),{onChange:t}))},[f.Stargazers]:{component:(e,t)=>h().createElement(h().Fragment,null)},[f.Workflows]:{component:(e,t)=>h().createElement(Le,rt(tt({},e.query.options||{}),{onChange:t}))},[f.Workflow_Usage]:{component:(e,t)=>h().createElement(ze,rt(tt({},e.query.options||{}),{onChange:t}))},[f.Workflow_Runs]:{component:(e,t)=>h().createElement(Je,rt(tt({},e.query.options||{}),{onChange:t}))}},lt=Object.keys(f).map((e=>({label:e.replace(/_/gi," "),value:e}))),it=[f.Projects,f.ProjectItems];const ct=e=>{const t=(0,d.useCallback)((t=>{e.onChange(t),k(t)&&e.onRunQuery()}),[e]),r=(0,d.useCallback)(((r,n)=>{t(rt(tt({},e.query),{[r]:n}))}),[t,e.query]),n=at[e.query.queryType||w],o=e.queryTypes||Object.keys(at);return h().createElement(h().Fragment,null,h().createElement(v.InlineField,{label:"Query Type",tooltip:"What resource are you querying for?",labelWidth:2*nt},h().createElement("div",{"aria-label":q.QueryType.container.ariaLabel},h().createElement(v.Select,{menuShouldPortal:!0,width:ot,options:lt.filter((e=>o.includes(e.value))),value:e.query.queryType,onChange:e=>r("queryType",e.value||w)}))),(a=e.query.queryType,!it.includes(a)&&h().createElement(B,{repository:e.query.repository,owner:e.query.owner,onChange:r=>{t(tt({},e.query,r))}})),n?n.component(e,(e=>r("options",e||void 0))):h().createElement("span",null,"Unsupported Query Type"));var a},ut=F.css`
  margin: 0px 3px;
  padding: 0px 3px;
`,st=e=>{const{onChange:t,options:r,value:n,width:o,loading:a}=e;return h().createElement(v.InlineFieldRow,null,h().createElement(v.Select,{allowCustomValue:!0,value:n,onChange:e=>t(e.value),width:o,disabled:a,placeholder:a?"Loading...":"Select...",options:r.map((e=>({label:e,value:e})))}),a&&h().createElement("div",null,h().createElement(v.Spinner,{className:ut})))};function pt(e,t,r,n,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function bt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function l(e){pt(a,n,o,l,i,"next",e)}function i(e){pt(a,n,o,l,i,"throw",e)}l(void 0)}))}}function yt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){yt(e,t,r[t])}))}return e}function gt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const mt=e=>{const t=`${e.datasource.name} - ${e.query.queryType||w}`,[r,n]=(0,d.useState)();return(0,d.useMemo)(bt((function*(){k(e.query)&&n(yield e.datasource.getChoices(e.query))})),[e.query,e.datasource]),h().createElement(h().Fragment,null,h().createElement(ct,{query:e.query,datasource:e.datasource,onChange:r=>e.onChange(gt(ft({},r),{field:e.query.field}),t),onRunQuery:()=>{}}),h().createElement(v.InlineField,{labelWidth:20,label:"Field Value",tooltip:"This field determines the value used for the variable"},h().createElement(st,{onChange:r=>e.onChange(gt(ft({},e.query),{key:r}),t),options:r||[],width:64,value:e.query.key,loading:!r})),h().createElement(v.InlineField,{labelWidth:20,label:"Field Display",tooltip:"This field determines the text used for the variable"},h().createElement(st,{onChange:r=>e.onChange(gt(ft({},e.query),{field:r}),t),options:r||[],width:64,value:e.query.field,loading:!r})))};function Ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ot(e,t,r[t])}))}return e}function ht(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const vt=(e,t,r,n)=>t?e.replace(t,r,n):t,jt=(e,t,r={})=>{let n=dt({},e);return Object.keys(n).forEach((e=>{if("refId"!==e){const o=n[e];if("string"==typeof o)n=ht(dt({},n),"query"===e?{[e]:vt(t,o,r,"csv")}:{[e]:vt(t,o,r)});else if(Array.isArray(o)){const a=o.map((e=>jt(e,t,r)));n=ht(dt({},n),{[e]:a})}}})),n};class wt extends g.CustomVariableSupport{query(e){let t=ht(dt({},null==e?void 0:e.targets[0]),{refId:"metricFindQuery"});return this.datasource.query(ht(dt({},e),{targets:[t]})).pipe((0,O.map)((e=>ht(dt({},e),{data:e.data||[]})))).pipe((0,O.map)((e=>Pt(t,e))))}constructor(e){super(),Ot(this,"datasource",void 0),Ot(this,"editor",void 0),this.datasource=e,this.editor=mt,this.datasource=e,this.query=this.query.bind(this)}}const Pt=(e,t)=>{var r;if((null==t||null===(r=t.data)||void 0===r?void 0:r.length)<1)return ht(dt({},t),{data:[]});const n=new g.DataFrameView(t.data[0]||{}).map((t=>{const r=t[e.key||""]||t[e.field||"name"];return{value:r,text:t[e.field||"name"]||r}}));return ht(dt({},t),{data:n})};function Et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Et(e,t,r[t])}))}return e}function Tt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function Ct(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const kt=e=>{if((e=>!("annotation"in e))(e))return e;const{annotation:t}=e,r=Ct(e,["annotation"]),{field:n,timeField:o}=t,a=Ct(t,["field","timeField"]);return Tt(St({},r),{target:a,mappings:St({text:n?{source:g.AnnotationEventFieldSource.Field,value:n}:void 0,time:o?{source:g.AnnotationEventFieldSource.Field,value:o}:void 0},r.mappings)})};function Dt(e,t,r,n,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){qt(e,t,r[t])}))}return e}function It(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}class Rt extends m.DataSourceWithBackend{query(e){return(e=>{e.app!==g.CoreApp.Dashboard&&e.app!==g.CoreApp.PanelViewer&&e.targets.forEach((t=>{let r={app:e.app,queryType:t.queryType};var n,o,a,l,i,c,u,s;"Issues"===t.queryType&&(r.timeField=S[null!==(o=null===(n=t.options)||void 0===n?void 0:n.timeField)&&void 0!==o?o:0]),"Pull_Requests"===t.queryType&&(r.timeField=E[null!==(l=null===(a=t.options)||void 0===a?void 0:a.timeField)&&void 0!==l?l:0]),"Workflows"===t.queryType&&(r.timeField=T[null!==(c=null===(i=t.options)||void 0===i?void 0:i.timeField)&&void 0!==c?c:0]),"Packages"===t.queryType&&(r.timeField=null!==(s=null==t||null===(u=t.options)||void 0===u?void 0:u.packageType)&&void 0!==s?s:"NPM"),(0,m.reportInteraction)("grafana_github_query_executed",r)}))})(e),super.query(e)}applyTemplateVariables(e,t){return((e,t,r)=>{let n=dt({},t);return n=jt(n,e,r),t.options&&(n=ht(dt({},n),{options:jt(t.options,e,r)})),n})(this.templateSrv,e,t)}getChoices(e){var t=this;return function(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function l(e){Dt(a,n,o,l,i,"next",e)}function i(e){Dt(a,n,o,l,i,"throw",e)}l(void 0)}))}}((function*(){const r={targets:[It(Ft({},e),{refId:"metricFindQuery"})],range:{to:{},from:{}}};try{var n;const e=yield(0,O.lastValueFrom)(t.query(r));return((null==e||null===(n=e.data[0])||void 0===n?void 0:n.fields)||[]).map((e=>e.name))||[]}catch(e){return Promise.reject(e)}}))()}constructor(e){super(e),qt(this,"templateSrv",(0,m.getTemplateSrv)()),qt(this,"filterQuery",(e=>k(e)&&!e.hide)),this.annotations={prepareAnnotation:kt},this.variables=new wt(this)}}const At=({dataSourceName:e,docsLink:t,hasRequiredFields:r=!0,className:n})=>{const o=(0,v.useTheme2)(),a={container:(0,F.css)({p:{margin:0},"p + p":{marginTop:o.spacing(2)}}),text:(0,F.css)({...o.typography.body,color:o.colors.text.secondary,a:(0,F.css)({color:o.colors.text.link,textDecoration:"underline","&:hover":{textDecoration:"none"}})})};return d.createElement("div",{className:(0,F.cx)(a.container,n)},d.createElement("p",{className:a.text},"Before you can use the ",e," data source, you must configure it below or in the config file. For detailed instructions,"," ",d.createElement("a",{href:t,target:"_blank",rel:"noreferrer"},"view the documentation"),"."),r&&d.createElement("p",{className:a.text},d.createElement("i",null,"Fields marked with * are required")))},xt=({children:e,title:t,description:r,isCollapsible:n=!1,isInitiallyOpen:o=!0,kind:a="section",className:l})=>{const{colors:i,typography:c,spacing:u}=(0,v.useTheme2)(),[s,p]=(0,d.useState)(!n||o),b=s?"angle-up":"angle-down",y="sub-section"===a,f=`${s?"Collapse":"Expand"} section ${t}`,g={header:(0,F.css)({display:"flex",justifyContent:"space-between",alignItems:"center"}),title:(0,F.css)({margin:0}),subtitle:(0,F.css)({margin:0,fontWeight:c.fontWeightRegular}),descriptionText:(0,F.css)({marginTop:u(y?.25:.5),marginBottom:0,...c.bodySmall,color:i.text.secondary}),content:(0,F.css)({marginTop:u(2)})};return d.createElement("div",{className:l},d.createElement("div",{className:g.header},"section"===a?d.createElement("h3",{className:g.title},t):d.createElement("h6",{className:g.subtitle},t),n&&d.createElement(v.IconButton,{name:b,onClick:()=>p(!s),type:"button",size:"xl","aria-label":f})),r&&d.createElement("p",{className:g.descriptionText},r),s&&d.createElement("div",{className:g.content},e))},Nt=({children:e,...t})=>d.createElement(xt,{...t,kind:"section"},e),Bt=()=>{const e=(0,v.useStyles2)(Wt);return h().createElement("hr",{className:e.horizontalDivider})},Wt=e=>({horizontalDivider:(0,F.css)({borderTop:`1px solid ${e.colors.border.weak}`,margin:e.spacing(2,0),width:"100%"})});function _t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){_t(e,t,r[t])}))}return e}function Ut(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}const Lt=e=>({externalLink:F.css`
      text-decoration: underline;
    `,radioButton:F.css`
      margin-bottom: ${e.spacing(2)};
    `}),Qt=e=>{const{options:t,onOptionsChange:r}=e,{jsonData:n,secureJsonData:o,secureJsonFields:a}=t,l=o||{},i=(0,v.useStyles2)(Lt),[c,u]=(0,d.useState)(!0),[s,p]=(0,d.useState)("github-enterprise-server"===n.githubPlan||n.githubUrl?"github-enterprise-server":(null==n?void 0:n.githubPlan)||"github-basic"),b=(t,r=!0)=>n=>{const{onOptionsChange:o,options:a}=e;o(Ut(Gt({},a),{secureJsonData:Ut(Gt({},a.secureJsonData),{[t]:n.target.value}),secureJsonFields:Ut(Gt({},a.secureJsonFields),{[t]:r})}))},y=e=>()=>{b(e,!1)({target:{value:""}})},f=(0,d.useCallback)((e=>{r(Ut(Gt({},t),{jsonData:Ut(Gt({},n),{selectedAuthType:e})}))}),[n,r,t]);return(0,d.useEffect)((()=>{n.selectedAuthType||f("personal-access-token")}),[n.selectedAuthType,f]),h().createElement(h().Fragment,null,h().createElement(At,{dataSourceName:"GitHub",docsLink:"https://grafana.com/docs/plugins/grafana-github-datasource",hasRequiredFields:!1}),h().createElement(Bt,null),h().createElement(v.Collapse,{collapsible:!0,label:"Access Token & Permissions",isOpen:c,onToggle:()=>u((e=>!e))},h().createElement("h4",null,"How to create a access token"),h().createElement("p",null,"To create a new fine grained access token, navigate to"," ",h().createElement("a",{className:i.externalLink,href:"https://github.com/settings/personal-access-tokens/new",target:"_blank",rel:"noreferrer"},"Personal Access Tokens")," ","or refer the guidelines from"," ",h().createElement("a",{className:i.externalLink,href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-fine-grained-personal-access-token",target:"_blank",rel:"noreferrer"},"the Github documentation.")),h().createElement("h4",null,"Repository access"),h().createElement("p",null,"In the ",h().createElement("b",null,"Repository access")," section, Select the required repositories you want to use with the plugin."),h().createElement("h4",null,"Permissions"),h().createElement("p",null,"In the repository permissions, Ensure to provide ",h().createElement("b",null,"read-only access")," to the necessary section which you want to use with the plugin. ",h().createElement("b",null,"The plugin does not require any write access.")," ",h().createElement("br",null),"Along with other permissions such as `Issues`, `Pull Requests`, ensure to provide read-only access to `Meta data` section as well.",h().createElement("br",null),"This plugin does not require any org level permissions")),h().createElement(Bt,null),h().createElement(Nt,{title:"Authentication"},h().createElement(v.Field,{label:"Authentication Type"},h().createElement(v.RadioButtonGroup,{options:[{label:"Personal Access Token",value:"personal-access-token"},{label:"GitHub App",value:"github-app"}],value:n.selectedAuthType,onChange:f,className:i.radioButton})),"personal-access-token"===n.selectedAuthType&&h().createElement(v.Field,{label:"Personal Access Token"},h().createElement(v.SecretInput,{placeholder:"Personal Access Token","data-testid":D.AccessToken,value:l.accessToken||"",isConfigured:a.accessToken,onChange:b("accessToken",!1),onReset:y("accessToken"),width:40})),"github-app"===n.selectedAuthType&&h().createElement(h().Fragment,null,h().createElement(v.Field,{label:"App ID"},h().createElement(v.Input,{placeholder:"App ID",value:n.appId,onChange:(0,g.onUpdateDatasourceJsonDataOption)(e,"appId"),width:40})),h().createElement(v.Field,{label:"Installation ID"},h().createElement(v.Input,{placeholder:"Installation ID",value:n.installationId,onChange:(0,g.onUpdateDatasourceJsonDataOption)(e,"installationId"),width:40})),h().createElement(v.Field,{label:"Private Key"},h().createElement(v.SecretTextArea,{placeholder:"-----BEGIN CERTIFICATE-----",isConfigured:a.privateKey,onChange:(0,g.onUpdateDatasourceSecureJsonDataOption)(e,"privateKey"),onReset:y("privateKey"),cols:55,rows:7})))),h().createElement(Bt,null),h().createElement(Nt,{title:"Connection",isCollapsible:!0},h().createElement(v.Label,null,"GitHub License Type"),h().createElement(v.RadioButtonGroup,{options:[{label:"Free, Pro & Team",value:"github-basic"},{label:"Enterprise Cloud",value:"github-enterprise-cloud"},{label:"Enterprise Server",value:"github-enterprise-server"}],value:s,onChange:e=>{r(Ut(Gt({},t),{jsonData:Ut(Gt({},n),{githubPlan:e,githubUrl:"github-enterprise-server"===e?n.githubUrl:""})})),p(e)},className:i.radioButton}),"github-enterprise-server"===s&&h().createElement(v.Field,{label:"GitHub Enterprise Server URL"},h().createElement(v.Input,{placeholder:"http(s)://HOSTNAME/",value:n.githubUrl,onChange:(0,g.onUpdateDatasourceJsonDataOption)(e,"githubUrl"),width:40}))))},Mt=new g.DataSourcePlugin(Rt).setConfigEditor(Qt).setQueryEditor(ct);return p})()));
//# sourceMappingURL=module.js.map